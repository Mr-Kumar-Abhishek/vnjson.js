var ren={ext:{}};
ren.game={scenes:{}};
ren.route=function(){location.hash=["#",ren.current.scene,ren.current.label,ren.current.item].join("/")};
ren.current={object:null,scene:null,label:null,item:0};
ren.getScene=function(){var e=["game",ren.current.scene,ren.current.label].join("/").concat(".json5"),n=["game",ren.current.scene,"characters.json5"].join("/"),r=["game",ren.current.scene,"preload.json5"].join("/");$.when($.get(e),$.get(n),$.get(r)).then(function(e,n,r){ren.game.scenes[ren.current.scene]={characters:n[0],preload:r[0]},ren.game.scenes[ren.current.scene][ren.current.label]=e[0],console.info(ren.game.scenes[ren.current.scene])}),ren.parse(),$(ren.parent).on("click",ren.parse)};
ren.event={name:function(o){$("#nameBox").html(o.name+": ").css("color",o.color)},reply:function(o,n){$("#dialogBox").html(o).css("color",n.color)}};
ren.event.jump=function(e){ren.current.item=0,ren.current.scene=e.split("/")[0],ren.current.label=e.split("/")[1],ren.getScene()};
ren.parse=function(){4===ren.current.item?(ren.current.item=0,ren.route(),ren.event.jump("lab/labuda")):(ren.current.item++,ren.route())};
ren.createLayers=function(){ren.parent="#"+ren.game.config.parent,ren.game.layers.forEach(function(e){"config.parent"===e.parent?($(ren.parent).append("<section id="+e.id+"></section>"),$("#"+e.id).css(e.style),ren.layers[e.id]=e.style):($("#"+e.parent).append("<section id="+e.id+"></section>"),$("#"+e.id).css(e.style),ren.layers[e.id]=e.style)}),ren.event.jump(ren.game.config.startLabel)};
ren.init=function(){$.ajaxSetup({dataType:"text",dataFilter:function(e){return JSON5.parse(e)}}),$.when($.get("/game/layers.json5"),$.get("/game/config.json5")).then(function(e,n){ren.game={layers:e[0],config:n[0]}})};




