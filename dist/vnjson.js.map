{"version":3,"sources":["navigo.js","vnjson.js","plugins/get-screens.js","plugins/jump.js","plugins/router.js","plugins/screen-show.js","plugins/vnjson-audio.js","plugins/vnjson-preload.js"],"names":["global","factory","exports","module","define","amd","Navigo","_typeof","Symbol","iterator","obj","constructor","prototype","isPushStateAvailable","window","history","pushState","r","useHash","hash","root","_routes","_useHash","_hash","_paused","_destroyed","_lastRouteResolved","_notFoundHandler","_defaultHandler","_usePushState","_onLocationChange","bind","_genericHooks","_historyAPIUpdateMethod","replace","_cLoc","split","_listen","updatePageLinks","clean","s","RegExp","regExpResultToParams","match","names","length","slice","reduce","params","value","index","decodeURIComponent","replaceDynamicURLParts","route","paramNames","regexp","PARAMETER_REGEXP","full","dots","name","push","REPLACE_VARIABLE_REGEXP","WILDCARD_REGEXP","REPLACE_WILDCARD","FOLLOWED_BY_SLASH_REGEXP","MATCH_REGEXP_FLAGS","getUrlDepth","url","compareUrlDepth","urlA","urlB","findMatchedRoutes","routes","arguments","undefined","map","_replaceDynamicURLPar","filter","m","matched","fallbackURL","result","isHashChangeAPIAvailable","extractGETParameters","join","getOnlyURL","onlyURL","cleanGETParam","str","manageHooks","handler","hooks","before","shouldRoute","after","isHashedRoot","helpers","navigate","path","absolute","to","_getRoot","resolve","location","href","on","_this","_len","args","Array","_key","func","uses","_add","orderedRoutes","Object","keys","sort","forEach","off","notFound","current","_this2","GETParameters","query","already","_callLeave","apply","destroy","clearTimeout","_listeningInterval","removeEventListener","self","document","_findLinks","link","hasListenerAttached","addEventListener","e","getLinkPath","preventDefault","generate","data","key","toString","pause","status","resume","historyAPIUpdateMethod","disableIfAPINotAvailable","lastRouteResolved","getAttribute","_hooks","encodeURI","as","_this3","cached","_check","check","setTimeout","__NAVIGO_WINDOW_LOCATION_MOCK__","call","querySelectorAll","leave","vnjs","plugins","TREE","DEBUG","playList","prevAudio","prevScreen","screenList","conf","prefix","element","gameDir","scenesDir","local","entryPoint","screenClass","event","emit","isArray","state","scene","label","screen","object","setScene","body","characters","aliase","character","reply","param","assets","parse","ctx","next","init","assign","jump","progressSave","id","serialState","JSON","stringify","localStorage","setItem","progressLoad","getItem","progressDelete","log","error","console","msg","license","fetchCss","filename","l","createElement","rel","h","getElementsByTagName","appendChild","uriHtml","uriCss","gameRoot","querySelector","fetch","then","text","innerHTML","screens","screensNodeList","styles","display","width","height","style","setAttribute","pathname","getScene","sceneName","labelName","uri","json","sceneBody","router","isScene","pathName","arr","isNaN","warn","isLabel","color","getRealDisplay","elem","currentStyle","getComputedStyle","computedStyle","getPropertyValue","hide","el","displayCache","isHidden","offsetWidth","offsetHeight","tr","nodeName","toLowerCase","show","old","testElem","removeChild","pscreen","play","action","persent","PROGREESS","i","asset","position","progress","Math","round","type","img","Image","src","onload","audio","Audio"],"mappings":"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","file":"vnjson.js","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.Navigo = factory());\n}(this, (function () { 'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction isPushStateAvailable() {\n  return !!(typeof window !== 'undefined' && window.history && window.history.pushState);\n}\n\nfunction Navigo(r, useHash, hash) {\n  this.root = null;\n  this._routes = [];\n  this._useHash = useHash;\n  this._hash = typeof hash === 'undefined' ? '#' : hash;\n  this._paused = false;\n  this._destroyed = false;\n  this._lastRouteResolved = null;\n  this._notFoundHandler = null;\n  this._defaultHandler = null;\n  this._usePushState = !useHash && isPushStateAvailable();\n  this._onLocationChange = this._onLocationChange.bind(this);\n  this._genericHooks = null;\n  this._historyAPIUpdateMethod = 'pushState';\n\n  if (r) {\n    this.root = useHash ? r.replace(/\\/$/, '/' + this._hash) : r.replace(/\\/$/, '');\n  } else if (useHash) {\n    this.root = this._cLoc().split(this._hash)[0].replace(/\\/$/, '/' + this._hash);\n  }\n\n  this._listen();\n  this.updatePageLinks();\n}\n\nfunction clean(s) {\n  if (s instanceof RegExp) return s;\n  return s.replace(/\\/+$/, '').replace(/^\\/+/, '^/');\n}\n\nfunction regExpResultToParams(match, names) {\n  if (names.length === 0) return null;\n  if (!match) return null;\n  return match.slice(1, match.length).reduce(function (params, value, index) {\n    if (params === null) params = {};\n    params[names[index]] = decodeURIComponent(value);\n    return params;\n  }, null);\n}\n\nfunction replaceDynamicURLParts(route) {\n  var paramNames = [],\n      regexp;\n\n  if (route instanceof RegExp) {\n    regexp = route;\n  } else {\n    regexp = new RegExp(route.replace(Navigo.PARAMETER_REGEXP, function (full, dots, name) {\n      paramNames.push(name);\n      return Navigo.REPLACE_VARIABLE_REGEXP;\n    }).replace(Navigo.WILDCARD_REGEXP, Navigo.REPLACE_WILDCARD) + Navigo.FOLLOWED_BY_SLASH_REGEXP, Navigo.MATCH_REGEXP_FLAGS);\n  }\n  return { regexp: regexp, paramNames: paramNames };\n}\n\nfunction getUrlDepth(url) {\n  return url.replace(/\\/$/, '').split('/').length;\n}\n\nfunction compareUrlDepth(urlA, urlB) {\n  return getUrlDepth(urlB) - getUrlDepth(urlA);\n}\n\nfunction findMatchedRoutes(url) {\n  var routes = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\n  return routes.map(function (route) {\n    var _replaceDynamicURLPar = replaceDynamicURLParts(clean(route.route)),\n        regexp = _replaceDynamicURLPar.regexp,\n        paramNames = _replaceDynamicURLPar.paramNames;\n\n    var match = url.replace(/^\\/+/, '/').match(regexp);\n    var params = regExpResultToParams(match, paramNames);\n\n    return match ? { match: match, route: route, params: params } : false;\n  }).filter(function (m) {\n    return m;\n  });\n}\n\nfunction match(url, routes) {\n  return findMatchedRoutes(url, routes)[0] || false;\n}\n\nfunction root(url, routes) {\n  var matched = routes.map(function (route) {\n    return route.route === '' || route.route === '*' ? url : url.split(new RegExp(route.route + '($|\\/)'))[0];\n  });\n  var fallbackURL = clean(url);\n\n  if (matched.length > 1) {\n    return matched.reduce(function (result, url) {\n      if (result.length > url.length) result = url;\n      return result;\n    }, matched[0]);\n  } else if (matched.length === 1) {\n    return matched[0];\n  }\n  return fallbackURL;\n}\n\nfunction isHashChangeAPIAvailable() {\n  return typeof window !== 'undefined' && 'onhashchange' in window;\n}\n\nfunction extractGETParameters(url) {\n  return url.split(/\\?(.*)?$/).slice(1).join('');\n}\n\nfunction getOnlyURL(url, useHash, hash) {\n  var onlyURL = url,\n      split;\n  var cleanGETParam = function cleanGETParam(str) {\n    return str.split(/\\?(.*)?$/)[0];\n  };\n\n  if (typeof hash === 'undefined') {\n    // To preserve BC\n    hash = '#';\n  }\n\n  if (isPushStateAvailable() && !useHash) {\n    onlyURL = cleanGETParam(url).split(hash)[0];\n  } else {\n    split = url.split(hash);\n    onlyURL = split.length > 1 ? cleanGETParam(split[1]) : cleanGETParam(split[0]);\n  }\n\n  return onlyURL;\n}\n\nfunction manageHooks(handler, hooks, params) {\n  if (hooks && (typeof hooks === 'undefined' ? 'undefined' : _typeof(hooks)) === 'object') {\n    if (hooks.before) {\n      hooks.before(function () {\n        var shouldRoute = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n        if (!shouldRoute) return;\n        handler();\n        hooks.after && hooks.after(params);\n      }, params);\n      return;\n    } else if (hooks.after) {\n      handler();\n      hooks.after && hooks.after(params);\n      return;\n    }\n  }\n  handler();\n}\n\nfunction isHashedRoot(url, useHash, hash) {\n  if (isPushStateAvailable() && !useHash) {\n    return false;\n  }\n\n  if (!url.match(hash)) {\n    return false;\n  }\n\n  var split = url.split(hash);\n\n  return split.length < 2 || split[1] === '';\n}\n\nNavigo.prototype = {\n  helpers: {\n    match: match,\n    root: root,\n    clean: clean,\n    getOnlyURL: getOnlyURL\n  },\n  navigate: function navigate(path, absolute) {\n    var to;\n\n    path = path || '';\n    if (this._usePushState) {\n      to = (!absolute ? this._getRoot() + '/' : '') + path.replace(/^\\/+/, '/');\n      to = to.replace(/([^:])(\\/{2,})/g, '$1/');\n      history[this._historyAPIUpdateMethod]({}, '', to);\n      this.resolve();\n    } else if (typeof window !== 'undefined') {\n      path = path.replace(new RegExp('^' + this._hash), '');\n      window.location.href = window.location.href.replace(/#$/, '').replace(new RegExp(this._hash + '.*$'), '') + this._hash + path;\n    }\n    return this;\n  },\n  on: function on() {\n    var _this = this;\n\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    if (typeof args[0] === 'function') {\n      this._defaultHandler = { handler: args[0], hooks: args[1] };\n    } else if (args.length >= 2) {\n      if (args[0] === '/') {\n        var func = args[1];\n\n        if (_typeof(args[1]) === 'object') {\n          func = args[1].uses;\n        }\n\n        this._defaultHandler = { handler: func, hooks: args[2] };\n      } else {\n        this._add(args[0], args[1], args[2]);\n      }\n    } else if (_typeof(args[0]) === 'object') {\n      var orderedRoutes = Object.keys(args[0]).sort(compareUrlDepth);\n\n      orderedRoutes.forEach(function (route) {\n        _this.on(route, args[0][route]);\n      });\n    }\n    return this;\n  },\n  off: function off(handler) {\n    if (this._defaultHandler !== null && handler === this._defaultHandler.handler) {\n      this._defaultHandler = null;\n    } else if (this._notFoundHandler !== null && handler === this._notFoundHandler.handler) {\n      this._notFoundHandler = null;\n    }\n    this._routes = this._routes.reduce(function (result, r) {\n      if (r.handler !== handler) result.push(r);\n      return result;\n    }, []);\n    return this;\n  },\n  notFound: function notFound(handler, hooks) {\n    this._notFoundHandler = { handler: handler, hooks: hooks };\n    return this;\n  },\n  resolve: function resolve(current) {\n    var _this2 = this;\n\n    var handler, m;\n    var url = (current || this._cLoc()).replace(this._getRoot(), '');\n\n    if (this._useHash) {\n      url = url.replace(new RegExp('^\\/' + this._hash), '/');\n    }\n\n    var GETParameters = extractGETParameters(current || this._cLoc());\n    var onlyURL = getOnlyURL(url, this._useHash, this._hash);\n\n    if (this._paused) return false;\n\n    if (this._lastRouteResolved && onlyURL === this._lastRouteResolved.url && GETParameters === this._lastRouteResolved.query) {\n      if (this._lastRouteResolved.hooks && this._lastRouteResolved.hooks.already) {\n        this._lastRouteResolved.hooks.already(this._lastRouteResolved.params);\n      }\n      return false;\n    }\n\n    m = match(onlyURL, this._routes);\n\n    if (m) {\n      this._callLeave();\n      this._lastRouteResolved = {\n        url: onlyURL,\n        query: GETParameters,\n        hooks: m.route.hooks,\n        params: m.params,\n        name: m.route.name\n      };\n      handler = m.route.handler;\n      manageHooks(function () {\n        manageHooks(function () {\n          m.route.route instanceof RegExp ? handler.apply(undefined, m.match.slice(1, m.match.length)) : handler(m.params, GETParameters);\n        }, m.route.hooks, m.params, _this2._genericHooks);\n      }, this._genericHooks, m.params);\n      return m;\n    } else if (this._defaultHandler && (onlyURL === '' || onlyURL === '/' || onlyURL === this._hash || isHashedRoot(onlyURL, this._useHash, this._hash))) {\n      manageHooks(function () {\n        manageHooks(function () {\n          _this2._callLeave();\n          _this2._lastRouteResolved = { url: onlyURL, query: GETParameters, hooks: _this2._defaultHandler.hooks };\n          _this2._defaultHandler.handler(GETParameters);\n        }, _this2._defaultHandler.hooks);\n      }, this._genericHooks);\n      return true;\n    } else if (this._notFoundHandler) {\n      manageHooks(function () {\n        manageHooks(function () {\n          _this2._callLeave();\n          _this2._lastRouteResolved = { url: onlyURL, query: GETParameters, hooks: _this2._notFoundHandler.hooks };\n          _this2._notFoundHandler.handler(GETParameters);\n        }, _this2._notFoundHandler.hooks);\n      }, this._genericHooks);\n    }\n    return false;\n  },\n  destroy: function destroy() {\n    this._routes = [];\n    this._destroyed = true;\n    this._lastRouteResolved = null;\n    this._genericHooks = null;\n    clearTimeout(this._listeningInterval);\n    if (typeof window !== 'undefined') {\n      window.removeEventListener('popstate', this._onLocationChange);\n      window.removeEventListener('hashchange', this._onLocationChange);\n    }\n  },\n  updatePageLinks: function updatePageLinks() {\n    var self = this;\n\n    if (typeof document === 'undefined') return;\n\n    this._findLinks().forEach(function (link) {\n      if (!link.hasListenerAttached) {\n        link.addEventListener('click', function (e) {\n          var location = self.getLinkPath(link);\n\n          if (!self._destroyed) {\n            e.preventDefault();\n            self.navigate(location.replace(/\\/+$/, '').replace(/^\\/+/, '/'));\n          }\n        });\n        link.hasListenerAttached = true;\n      }\n    });\n  },\n  generate: function generate(name) {\n    var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    var result = this._routes.reduce(function (result, route) {\n      var key;\n\n      if (route.name === name) {\n        result = route.route;\n        for (key in data) {\n          result = result.toString().replace(':' + key, data[key]);\n        }\n      }\n      return result;\n    }, '');\n\n    return this._useHash ? this._hash + result : result;\n  },\n  link: function link(path) {\n    return this._getRoot() + path;\n  },\n  pause: function pause() {\n    var status = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n\n    this._paused = status;\n    if (status) {\n      this._historyAPIUpdateMethod = 'replaceState';\n    } else {\n      this._historyAPIUpdateMethod = 'pushState';\n    }\n  },\n  resume: function resume() {\n    this.pause(false);\n  },\n  historyAPIUpdateMethod: function historyAPIUpdateMethod(value) {\n    if (typeof value === 'undefined') return this._historyAPIUpdateMethod;\n    this._historyAPIUpdateMethod = value;\n    return value;\n  },\n  disableIfAPINotAvailable: function disableIfAPINotAvailable() {\n    if (!isPushStateAvailable()) {\n      this.destroy();\n    }\n  },\n  lastRouteResolved: function lastRouteResolved() {\n    return this._lastRouteResolved;\n  },\n  getLinkPath: function getLinkPath(link) {\n    return link.getAttribute('href');\n  },\n  hooks: function hooks(_hooks) {\n    this._genericHooks = _hooks;\n  },\n\n  _add: function _add(route) {\n    var handler = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var hooks = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n    if (typeof route === 'string') {\n      route = encodeURI(route);\n    }\n    this._routes.push((typeof handler === 'undefined' ? 'undefined' : _typeof(handler)) === 'object' ? {\n      route: route,\n      handler: handler.uses,\n      name: handler.as,\n      hooks: hooks || handler.hooks\n    } : { route: route, handler: handler, hooks: hooks });\n\n    return this._add;\n  },\n  _getRoot: function _getRoot() {\n    if (this.root !== null) return this.root;\n    this.root = root(this._cLoc().split('?')[0], this._routes);\n    return this.root;\n  },\n  _listen: function _listen() {\n    var _this3 = this;\n\n    if (this._usePushState) {\n      window.addEventListener('popstate', this._onLocationChange);\n    } else if (isHashChangeAPIAvailable()) {\n      window.addEventListener('hashchange', this._onLocationChange);\n    } else {\n      var cached = this._cLoc(),\n          current = void 0,\n          _check = void 0;\n\n      _check = function check() {\n        current = _this3._cLoc();\n        if (cached !== current) {\n          cached = current;\n          _this3.resolve();\n        }\n        _this3._listeningInterval = setTimeout(_check, 200);\n      };\n      _check();\n    }\n  },\n  _cLoc: function _cLoc() {\n    if (typeof window !== 'undefined') {\n      if (typeof window.__NAVIGO_WINDOW_LOCATION_MOCK__ !== 'undefined') {\n        return window.__NAVIGO_WINDOW_LOCATION_MOCK__;\n      }\n      return clean(window.location.href);\n    }\n    return '';\n  },\n  _findLinks: function _findLinks() {\n    return [].slice.call(document.querySelectorAll('[data-navigo]'));\n  },\n  _onLocationChange: function _onLocationChange() {\n    this.resolve();\n  },\n  _callLeave: function _callLeave() {\n    var lastRouteResolved = this._lastRouteResolved;\n\n    if (lastRouteResolved && lastRouteResolved.hooks && lastRouteResolved.hooks.leave) {\n      lastRouteResolved.hooks.leave(lastRouteResolved.params);\n    }\n  }\n};\n\nNavigo.PARAMETER_REGEXP = /([:*])(\\w+)/g;\nNavigo.WILDCARD_REGEXP = /\\*/g;\nNavigo.REPLACE_VARIABLE_REGEXP = '([^\\/]+)';\nNavigo.REPLACE_WILDCARD = '(?:.*)';\nNavigo.FOLLOWED_BY_SLASH_REGEXP = '(?:\\/$|$)';\nNavigo.MATCH_REGEXP_FLAGS = '';\n\nreturn Navigo;\n\n})));\n","\r\nvar vnjs = {\r\n  \r\n      plugins: {},\r\n      TREE: {},\r\n      DEBUG: false,\r\n      playList: {},\r\n      prevAudio: \"\",\r\n      prevScreen: \"\",\r\n      screenList: {}\r\n};\r\n\r\nvnjs.conf = {\r\n      prefix: 'vnjson-',\r\n      element: '.gameElement',\r\n      gameDir: './game',\r\n      scenesDir: \"scenes\",\r\n      local: 'en-US',\r\n      entryPoint: 'entry/point',\r\n      screenClass: '.screen'\r\n};\r\n\r\nvnjs.on = function(event, handler){\r\n          if (!vnjs.plugins[event]) {\r\n              vnjs.plugins[event] = [];\r\n          };\r\n          vnjs.plugins[event].push(handler);\r\n};\r\n\r\nvnjs.emit = function (event, ...args) {\r\n         if (Array.isArray(vnjs.plugins[event])) {\r\n            vnjs.plugins[event].map(function(handler){\r\n                    handler.call(vnjs, ...args);\r\n            });\r\n         }\r\n         /*\r\n         else{\r\n          Выводятся системные слушатели\r\n          console.log(`Event [ ${event} ] not found`)\r\n         }\r\n         */\r\n};\r\nvnjs.off = function (event) {\r\n        delete vnjs.plugins[event];\r\n};\r\n\r\n/*\r\n * В {state} должно помещаться все то\r\n * что сохроняется в карту памяти\r\n * И что важно загрузить из нее без последствий.\r\n * В состоянии не должно быть мусора\r\n */\r\n\r\nvnjs.state = {\r\n  scene: 'scene',\r\n  label: 'label',\r\n  index: 0,\r\n  screen: \"\", //current screen\r\n  data: {}, //userData\r\n};\r\n\r\n\r\n/*\r\n * Получает текущее тела из состояние\r\n */\r\nvnjs.current = {\r\n  \r\n      scene: function (){\r\n        return vnjs.TREE[vnjs.state.scene];\r\n      },\r\n      label: function (){\r\n        return vnjs.TREE[vnjs.state.scene][vnjs.state.label];\r\n      },\r\n      object: function (){\r\n        return vnjs.TREE[vnjs.state.scene][vnjs.state.label][vnjs.state.index];\r\n     }\r\n};\r\n\r\n\r\nvnjs.setScene = function (name, body){\r\n  this.TREE[name] = body;\r\n  this.state.scene = name;\r\n\r\n  body.characters.map(character=>{\r\n    let aliase = Object.keys(character)[0];\r\n\r\n    vnjs.on(aliase, function(reply){\r\n          vnjs.emit('character', {aliase, param: character[aliase], reply } );\r\n\r\n    });\r\n\r\n});\r\n  this.emit('load', body.assets);\r\n \r\n};\r\n\r\n\r\n\r\n\r\nvnjs.parse = function (obj){\r\n  var ctx = null;\r\n  if(obj){\r\n    ctx = obj;\r\n  }else{\r\n    ctx = vnjs.current.object();\r\n  };\r\n\r\n  for(let event in ctx){\r\n\r\n        vnjs.emit(event, ctx[event]);\r\n\r\n  };\r\n\r\n};\r\n\r\n\r\nvnjs.next = function (){\r\n  this.parse();\r\n  this.state.index++;\r\n  this.emit('next', this.state.index)\r\n  return '-------------------------';\r\n};\r\n\r\n\r\nvnjs.init = function (conf){\r\n  Object.assign(vnjs.conf, conf);\r\n  this.emit('getScreens')\r\n  this.on('screensLoaded', ()=>{\r\n   \r\n     this.parse( { jump: conf.entryPoint } )\r\n  })\r\n \r\n  return true;\r\n};\r\n\r\n\r\nvnjs.progressSave = function(id='default'){\r\n  let { conf } = this;\r\nlet serialState = JSON.stringify(this.state); \r\n    localStorage.setItem(conf.prefix+id, serialState); \r\n    this.emit('progressSave', { id })\r\n};\r\n\r\nvnjs.progressLoad = function(id='default'){\r\n  let { conf } = this;\r\n  let { screen, scene, label, index } = this.state;\r\n  vnjs.state = JSON.parse(localStorage.getItem(conf.prefix+id));\r\n\r\n  this.emit('progressLoad', { id });\r\n  this.parse({ screen })\r\n  this.parse({\r\n      jump: [ scene, label, index].join('/')\r\n    })\r\n}\r\n\r\nvnjs.progressDelete = function(id){\r\n  let { conf } = this;\r\n  delete localStorage[conf.prefix+id];\r\n  this.emit('progressDelete', { id });\r\n};\r\n\r\n\r\n\r\nvar log = {\r\n  error: msg=>{\r\n    console.log(`%c[ Error ] %c ${msg}`, \"color: white; background: red; font-size:12px;\", \"color: red; font-size:12px;\");\r\n  },\r\n  scene: (scene, label)=>{\r\n    console.log(`%c ${scene} %c ${label}`, \"color: #C9DAE4; background: #A0BACB; font-size:12px;\", \"background: #C9DAE4; color: #A0BACB; font-size:12px;\");\r\n  },\r\n  event: (e, msg=\"\")=>{\r\n    console.log(`%c[ ${e} ]%c ${msg}`, \"color: white; background: orange; font-size:12px;\", \"color: black; font-size:12px;\");\r\n  },\r\n  //#A0BACB\r\n  index: _=>{\r\n    console.log(`%c vnjson.js %c v0.9.3 %c license %c MIT `, \"color: #C9DAE4; background: #A0BACB; font-size:12px;\", \"background: #C9DAE4; color: #A0BACB; font-size:12px;\", \"color: white; background: #555555; font-size:12px;\", \"background: #007EC6; color: white; font-size:12px;\");\r\n  },\r\n  license: _=>{\r\n     console.log(`%c license %c MIT `, \"color: white; background: #555555; font-size:12px;\", \"background: #007EC6; color: white; font-size:12px;\");\r\n  }\r\n\r\n}\r\n\r\nlog.index();\r\n","vnjs.on('getScreens', function(){\r\n\r\nconst { conf, DEBUG, emit } = this;\r\n\r\nfunction fetchCss(filename) {\r\n    var l = document.createElement('link');\r\n    l.rel = 'stylesheet';\r\n    l.href = filename\r\n    var h = document.getElementsByTagName('head')[0];\r\n    h.appendChild(l);\r\n};\r\n\r\n\r\n\r\n\t\r\n\tlet uriHtml = `${conf.gameDir}/screens.html`;\r\n\tlet uriCss = `${conf.gameDir}/screens.css`;\r\n\tlet gameRoot = document.querySelector(conf.element);\r\n\tfetch(uriHtml)\r\n\t\t.then(r=>r.text())\r\n\t\t\r\n\t\t.then(screens=>{\r\n\t\t\tfetchCss(uriCss);\r\n\t\t\tgameRoot.innerHTML = screens;\r\n\t\t})\r\n\t\t.then(()=>{\r\n\t\t\tlet screensNodeList = document.querySelectorAll(conf.screenClass);\r\n            screensNodeList.forEach((screen)=>{\r\n\r\n             let styles = {\r\n                    display: 'none',\r\n                    width: '100%',\r\n                    height: '100%'\r\n                  };\r\n             Object.assign(screen.style, styles);\r\n\r\n             /*Код кантораЮ необходимо для работы 'Правильлного show/hide'*/\r\n\t\t\tscreen.setAttribute(\"displayOld\", screen.style.display)\r\n             \r\n\r\n            vnjs.screenList[screen.id] = screen;\r\n            \r\n         //   DEBUG&&console.log(screen);\r\n            \r\n            });\r\n\r\n          emit('screensLoaded')\r\n\t\t})\r\n\t\t//.catch(function(error) { console.error(error); })\r\n\t\t\r\n})","vnjs.on('jump', function(pathname){\r\n\r\n\r\n\r\nconst { parse,  emit, DEBUG, conf, setScene } = this;\r\n\r\nfunction getScene(sceneName, labelName){\r\n\r\n\r\n  let uri = `${conf.gameDir}/${conf.scenesDir}/${conf.local}/${sceneName}.json`;\r\n  emit('preload', { sceneName, labelName });\r\n  fetch(uri)\r\n  .then(r=>r.json())\r\n  .then(sceneBody=>{\r\n\r\n\r\n    vnjs.setScene(sceneName, sceneBody);\r\n\r\n  });\r\n/*\r\n\r\nsetScene(\"*\", sceneBody);\r\n\r\nstate.label = \"mainMenu\";\r\n\r\nnext();\r\n*/\r\n\r\n}\r\n vnjs.on('next', function(){\r\n   vnjs.router.navigate('/'+vnjs.state.scene+'/'+vnjs.state.label+'/'+vnjs.state.index);\r\n\r\n })\r\n\r\nfunction isScene(pathName){\r\n  var arr = pathName.split('/');\r\n  /*\r\n      scene/label/index\r\n  */\r\n  if(arr.length===3){\r\n    if( isNaN(+arr[2]) ){\r\n      console.warn('scene/label/index')\r\n      console.warn('Index should be a Number');\r\n      vnjs.state.index = 0;\r\n    }\r\n    \r\n    return true;\r\n  }\r\n  /*\r\n      scene/label\r\n  */\r\n  else if(arr.length===2){\r\n    var isLabel = false;\r\n     /*  scene/label  */\r\n    if( isNaN(+arr[1]) ){\r\n      isLabel = true;\r\n    }\r\n    /*  label/index  */\r\n    else {\r\n      isLabel = false;\r\n    }\r\n   \r\n    return isLabel;\r\n  }\r\n \r\n};\r\n\r\n  var arr = pathname.split('/');\r\n\r\nif(isScene(pathname)){\r\n\r\n\r\n    // set state\r\n    vnjs.state.scene = arr[0];\r\n    vnjs.state.label = arr[1];\r\n    vnjs.state.index = arr[2]||0;\r\n   getScene(vnjs.state.scene, vnjs.state.label);\r\n\r\n   vnjs.router.navigate('/'+pathname+'/'+vnjs.state.index);\r\n\r\n}else{\r\n \r\n\t // set state\r\n   // vnjs.state.scene = vnjs.state.scene;\r\n    vnjs.state.label = arr[0];\r\n    vnjs.state.index = arr[1]||0;\r\n\r\n    vnjs.router.navigate('/'+vnjs.state.scene+'/'+vnjs.state.label+'/'+vnjs.state.index);\r\n   \r\n\r\n   parse();\r\n}\r\n\r\n\r\n\r\n});\r\n\r\n\r\n","{\r\n\tlet root = null;\r\n\tvnjs.router = new Navigo(root, true, '#!');\r\n};\r\n\r\nvnjs.router\r\n  .on(function(){\r\n   // vnjs.parse({screen: 'main-menu'})\r\n  })\r\n\r\n  .on('/screen/:id', function(params){\r\n    let { id } = params;\r\n    vnjs.parse({screen: id})\r\n  })\r\n  /* .on('/:scene', function(params){\r\n  \tlet { scene } = params;\r\n    console.error('Необходимо задать лабел')\r\n   \r\n      vnjs.parse({\r\n            jump: [ scene, label ].join('/')\r\n          })\r\n  })*/\r\n  /* .on('/:scene/:label', function(params){\r\n  \tlet { scene, label } = params;\r\n   vnjs.parse({\r\n            jump: [ scene, label, 0 ].join('/')\r\n          })\r\n    \r\n  })*/\r\n  .on('/:scene/:label/:index', function (params) {\r\n//router.navigate('/products/list');\r\n    let { scene, label, index } = params;\r\n     /* vnjs.parse({\r\n            jump: [ scene, label, index ].join('/')\r\n          })*/\r\n\r\n      vnjs.on('character', data=>{\r\n        let { param , reply } = data;\r\n\r\n        console.log(`%c ${param.name}: %c ${reply} `, `color: white;background-color:${param.color};`)\r\n      })    \r\n  })\r\n  .notFound(function(){\r\n  \tconsole.warn('Маршрута не существует')\r\n  })\r\n  .resolve();\r\n\r\n\r\n","/**\r\n\r\n\r\n\r\nПлагины\r\nget-screens\r\n &\r\nscreen-show\r\nобъеденить в один ->screen\r\n\r\n* Так же можно было бы объеденить jump и getScenes\r\n*\r\n*/\r\nfunction getRealDisplay(elem) {\r\n\tif (elem.currentStyle) {\r\n\t\treturn elem.currentStyle.display\r\n\t} else if (window.getComputedStyle) {\r\n\t\tvar computedStyle = window.getComputedStyle(elem, null )\r\n\r\n\t\treturn computedStyle.getPropertyValue('display')\r\n\t}\r\n}\r\n\r\nfunction hide(el) {\r\n\tif (!el.getAttribute('displayOld')) {\r\n\t\tel.setAttribute(\"displayOld\", el.style.display)\r\n\t}\r\n\r\n\tel.style.display = \"none\"\r\n}\r\n\r\ndisplayCache = {}\r\n\r\nfunction isHidden(el) {\r\n\tvar width = el.offsetWidth, height = el.offsetHeight,\r\n\t\ttr = el.nodeName.toLowerCase() === \"tr\"\r\n\r\n\treturn width === 0 && height === 0 && !tr ?\r\n\t\ttrue : width > 0 && height > 0 && !tr ? false :\tgetRealDisplay(el)\r\n}\r\n\r\n\r\n\r\nfunction show(el) {\r\n\r\n\tif (getRealDisplay(el) != 'none') return\r\n\r\n\tvar old = el.getAttribute(\"displayOld\");\r\n\tel.style.display = old || \"\";\r\n\r\n\tif ( getRealDisplay(el) === \"none\" ) {\r\n\t\tvar nodeName = el.nodeName, body = document.body, display\r\n\r\n\t\tif ( displayCache[nodeName] ) {\r\n\t\t\tdisplay = displayCache[nodeName]\r\n\t\t} else {\r\n\t\t\tvar testElem = document.createElement(nodeName)\r\n\t\t\tbody.appendChild(testElem)\r\n\t\t\tdisplay = getRealDisplay(testElem)\r\n\r\n\t\t\tif (display === \"none\" ) {\r\n\t\t\t\tdisplay = \"block\"\r\n\t\t\t}\r\n\r\n\t\t\tbody.removeChild(testElem)\r\n\t\t\tdisplayCache[nodeName] = display\r\n\t\t}\r\n\r\n\t\tel.setAttribute('displayOld', display)\r\n\t\tel.style.display = display\r\n\t}\r\n}\r\n\r\n\r\n\r\n\r\nvnjs.on('screen', function(id){\r\n\tthis.emit(id, vnjs.screenList[id]);\r\n\r\n\r\n if(vnjs.prevScreen!=\"\"){\r\n \t\t\t\tlet pscreen = vnjs.screenList[vnjs.prevScreen];\r\n         hide(pscreen);\r\n        \r\n }\r\n\r\n vnjs.prevScreen = id;\r\n\t//prefix\r\n\t//show.id\r\n\t//hide.pref.screen\r\n\t//push.state.screens\r\nvnjs.state.screen = id;\r\n\tshow(vnjs.screenList[id])\r\n})","\r\n\r\nvnjs.on('audio', function(data){\r\n\r\n\r\n\r\n  if(typeof data === 'string'){\r\n      \r\n       if(vnjs.prevAudio!=\"\"){\r\n         vnjs.playList[vnjs.prevAudio].pause();\r\n       }\r\n       vnjs.playList[data].play(); \r\n       vnjs.prevAudio = data;\r\n\r\n  }else if(typeof data === 'object'){\r\n\r\n      if(vnjs.prevAudio!=\"\"){\r\n          vnjs.playList[vnjs.prevAudio].pause();\r\n       }\r\n\r\n      vnjs.playList[data.id][data.action]();\r\n    \r\n       vnjs.prevAudio = data.id;\r\n     // vnjs.audio[data.id].loop = data.loop;\r\n  }else{\r\n    console.error('incorect data type');\r\n  }\r\n//var sound = self.playlist[self.index].howl;\r\n\r\n});","/* @events\r\n    * preload\r\n    * load\r\n    * postload\r\n */\r\n\r\nvnjs.on('load', function(assets){\r\n  const { DEBUG, emit } = this;\r\n\r\n\r\nvar persent = 100/assets.length;\r\nvar PROGREESS = 0;\r\nvar i = 0;\r\nfor(let asset of assets){\r\n \r\nvar position = [ i+=1, '/', assets.length ].join(\"\");\r\n\r\nlet progress = Math.round(PROGREESS+=persent)+\"%\";\r\n\r\n\r\n  if(asset.type===\"image\"){\r\n       let img = new Image();\r\n           img.src = asset.path;\r\n           img.onload = function(){\r\n                 emit('imageLoad', asset);\r\n           };\r\n  }\r\n  else if(asset.type===\"audio\"){\r\n       let audio = new Audio();\r\n           audio.addEventListener('canplaythrough', ()=>{\r\n                  emit('audioLoad', asset);\r\n           }, false);\r\n          audio.src = asset.path;\r\n        vnjs.playList[asset.id] = audio; \r\n  }\r\n  else{\r\n    console.error('Incorect asset type');\r\n    break;\r\n  }\r\nlet data = Object.assign(asset, {progress, position});\r\n                  emit('asset', data);\r\n};\r\n\r\n  emit('postload');\r\n});\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]}