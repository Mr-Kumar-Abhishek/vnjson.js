<!DOCTYPE html>
<html>
<head>
  <title>example</title>
  <meta charset="utf-8">
  <script src="./start.js"></script>
  <script src="./lab.js"></script>
  <script src="../dist/vnjson.js"></script>
</head>
<body>


<script type="text/javascript">



//vnjs.ctx.label = 'start';



vnjs.on('log', function(msg){
    console.log(msg);
});


vnjs.on('alert', function(param){
  console.info('Game Over!');
});



vnjs.on('alias', function(obj){

 console.log(obj.character.name+": "+obj.reply);
});

vnjs.getScene = function(sceneName){
      let { setScene } = vnjs;
      setScene(sceneName, scene);
}

vnjs.on('jump', function(pathname){
  let {ctx, next, setScene, setLabel, util, game, parse, getScene} = this;

  let isScene = /\/\w+/gi.test(pathname);
  if(isScene){
    let obj = util.splitPathName(pathname);
    getScene(obj.scene)
  }else{


   ctx.num = 0;
   setLabel(pathname, ctx.scene.labels[pathname] )

   parse();
  }
});

window.onload = function(){
  
 vnjs
  .init({
      startLabel: 'start/start',
      local: 'ru-RU',
    })
  //.setScene('main', scene)
  //.parse();
};


</script>
</body>
</html>